name: trigger jenkins job
on:
  push: 
    branches: [jenkins-on-ec2]
jobs:
  trigger-a-jenkins-job:
    runs-on: ubuntu-latest
    steps:
     - uses: actions/checkout@v3
       with:
         jenkins_home: jenkins_home
     - run: |
          curl \
            -X GET \
             http://ec2-3-16-151-254.us-east-2.compute.amazonaws.com:8080/crumbIssuer/api/json \
             --user pulkit_apisero:admin \
             -H 'Jenkins-Crumb: 04e2c6d7044523b5cdd40ad080b37ecd49448656fecba8370b729ed2d82b8bbc'
          curl \
            -X POST \
             http://ec2-3-16-151-254.us-east-2.compute.amazonaws.com:8080/job/job-07092022/buildWithParameters \
             --data token=1116e4d9dd7a0d4dab73d45d96e9b5fb97 \
             --user pulkit_apisero:admin \
             -H 'Jenkins-Crumb: 04e2c6d7044523b5cdd40ad080b37ecd49448656fecba8370b729ed2d82b8bbc'
