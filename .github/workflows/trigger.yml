name: trigger jenkins job
on:
  push: 
    branches: [jenkins-on-ec2]
jobs:
  trigger-a-jenkins-job:
    runs-on: ubuntu-latest
    steps:
      - name: Taking Latest_Crumb
        id: latestcrumb
      - run: |
          jenkins_data= $(curl -X GET http://ec2-3-16-151-254.us-east-2.compute.amazonaws.com:8080/crumbIssuer/api/json --user pulkit_apisero:admin)
          Latest_Crumb_ID=$(echo "$jenkins_data" | jq -r '.[0].crumb')
          echo "Latest_Crumb_ID: Latest Crumb ID is : $Latest_Crumb_ID"
          echo ::set-output name=Latest_Crumb_ID::"$Latest_Crumb_ID"
